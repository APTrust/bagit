{{! This template is used both on the BagItProfile form and on
    the job form. The flag allowEditTagDef is true on the
    BagItProfile form, so that users can edit the profile's
    tag definitions. It's false on the job form, so users can
    edit only the tag values. --}}

{{#each tags }}
<div class="row">
  <div class="col-md-6">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title"><a href="#tags{{ @index }}" data-toggle="collapse">Tags in {{ @key }}</a></h3>
      </div>
      <div class="panel-body panel-collapse in" id="tags{{ @index }}">
        <table class="table table-hover">
          <thead class="thead-inverse">
            <tr>
              <th>Tag Name</th>
              <th>{{#if ../allowEditTagDef }}Default{{/if}} Value</th>
            </tr>
          </thead>
          <tbody>
            {{#each this as |tag| }}
            <tr {{#if ../../allowEditTagDef }}class="clickable-row"{{/if }} data-object-id="{{ tag.id }}" data-object-type="TagDefinition">
              <td>{{ tag.tagName }}</td>
              <td>
                {{#if ../../allowEditTagDef }}
                  {{ tag.defaultValue }}
                {{ else if tag.values }}
                  <select name="{{ tag.tagName }}" id="{{ tag.id }}" class="form-control">
                    <option value="">-- Choose --</option>
                    {{#each tag.values as |val| }}
                    <option value="{{ val }}" {{# if (eq val tag.getValue) }}selected{{/if}}>{{ val }}</option>
                    {{/each}}
                  </select>
                {{ else }}
                  <textarea name="{{ tag.tagName }}" id="{{ tag.id }}" class="form-control">{{ val }}</textarea>
                {{/if}}
              </td>
            </tr>
            {{/each }}
            <tr>
              <td></td>
              <td><div class="pull-right">
                  <a class="btn btn-primary btn-xs" data-btn-type="NewTagDef" data-tag-file="{{ @key }}" role="button">+</a>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{{/each}}
